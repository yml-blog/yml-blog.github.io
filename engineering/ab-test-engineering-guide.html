<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Feature Gates = Experiments: An Engineering Guide to A/B Value, System, and Hard Tech | Yangming Li</title>
    <meta name="description" content="A practical engineering guide to A/B testing at scale: value and culture, platform evolution, power & MDE, CUPED/CURE variance reduction, Bayesian vs. frequentist, sequential testing, SOPs, pitfalls, and resources.">
    <meta name="keywords" content="A/B testing, experimentation, engineering, feature gate, CUPED, sequential testing, MDE, power, experiment platform, variance reduction, Yangming Li, engineering">
    <link href="../favicon.png" rel="icon">
    <meta name="robots" content="index,follow,max-image-preview:large">
    <link href="https://yangmingli.com/engineering/ab-test-engineering-guide.html" rel="canonical">
    
    <!-- Open Graph -->
    <meta property="og:type" content="article">
    <meta property="og:title" content="Feature Gates = Experiments: An Engineering Guide to A/B Value, System, and Hard Tech">
    <meta property="og:description" content="Practical engineering of A/B testing at scale, including CUPED, sequential testing, and SOPs.">
    <meta property="og:url" content="https://yangmingli.com/engineering/ab-test-engineering-guide.html">
    <meta property="og:image" content="https://yangmingli.com/img/Logo.png">
    <meta property="og:site_name" content="Yangming Li - AI/ML Blog">
    <meta property="og:locale" content="en_US">
    <meta property="article:author" content="Yangming Li">
    <meta property="article:published_time" content="2024-12-19T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-12-19T00:00:00+00:00">
    <meta property="article:section" content="Engineering">
    <meta property="article:tag" content="A/BÊµãËØï, ÂÆûÈ™åËÆæËÆ°, Â∑•Á®ãÂåñ, CUPED, Â∫èË¥ØÊ£ÄÈ™å">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Feature Gates = Experiments: An Engineering Guide to A/B">
    <meta name="twitter:description" content="Engineering A/B at scale: CUPED, sequential testing, platform design, SOPs.">
    <meta name="twitter:image" content="https://yangmingli.com/img/Logo.png">
    
    <link href="https://fonts.googleapis.com/css?family=Hind:300,400,500,600,700" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&display=swap" rel="stylesheet">
    <link href="../css/font-awesome.min.css" rel="stylesheet">
    <link href="../css/bootstrap.min.css" rel="stylesheet">
    <link href="../css/style_blog.css" rel="stylesheet">
    <link href="../css/blog_post.css" rel="stylesheet">
    <link href="../css/nav.css" rel="stylesheet">
    
    <!-- Prism.js for code highlighting -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/toolbar/prism-toolbar.min.css" rel="stylesheet">
    
    <script src="../js/loadHeader.js"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Hind', sans-serif;
            line-height: 1.6;
        }
        .container {
            width: 100%;
            max-width: 800px;
            margin: 0 auto;
            padding: 0 15px;
        }
        .header {
            text-align: center;
            padding: 2rem 0;
        }
        h1 {
            margin-top: 0;
        }
        
        /* Dark mode toggle styles */
        .theme-switch-wrapper {
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 20px 0;
        }
        .theme-switch {
            display: inline-block;
            height: 24px;
            position: relative;
            width: 50px;
            margin: 0 10px;
        }
        .theme-switch input {
            display: none;
        }
        .slider {
            background-color: #ccc;
            bottom: 0;
            cursor: pointer;
            left: 0;
            position: absolute;
            right: 0;
            top: 0;
            transition: .4s;
        }
        .slider:before {
            background-color: #fff;
            bottom: 4px;
            content: "";
            height: 16px;
            left: 4px;
            position: absolute;
            transition: .4s;
            width: 16px;
        }
        input:checked + .slider {
            background-color: #f1780e;
        }
        input:checked + .slider:before {
            transform: translateX(26px);
        }
        .slider.round {
            border-radius: 34px;
        }
        .slider.round:before {
            border-radius: 50%;
        }
        
        /* Dark mode colors */
        body.dark-mode {
            background-color: #1a1a1a;
            color: #f5f5f5;
        }
        body.dark-mode .header .content h1,
        body.dark-mode .header .content p {
            color: #f5f5f5;
        }
        body.dark-mode .article-metadata {
            color: #dddddd;
        }
        body.dark-mode h2, 
        body.dark-mode h3, 
        body.dark-mode h4 {
            color: #f1780e;
        }
        body.dark-mode pre code {
            background-color: #2d2d2d;
            color: #f5f5f5;
        }
        body.dark-mode .technical-box {
            background-color: #2d2d2d;
            border-color: #3d3d3d;
        }

        /* Social sharing buttons */
        .blog-share-buttons {
            margin-top: 20px;
            margin-bottom: 30px;
            display: flex;
            gap: 15px;
        }
        .blog-share-buttons a {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 8px 16px;
            border-radius: 4px;
            color: #fff;
            text-decoration: none;
            transition: all 0.3s ease;
            font-weight: 500;
        }
        .blog-share-buttons .twitter {
            background-color: #1DA1F2;
        }
        .blog-share-buttons .linkedin {
            background-color: #0A66C2;
        }
        .blog-share-buttons .email {
            background-color: #D44638;
        }
        .blog-share-buttons a:hover {
            opacity: 0.9;
            transform: translateY(-2px);
        }
        .blog-share-buttons i {
            margin-right: 8px;
        }
        
        /* Code block styling */
        pre[class*="language-"] {
            border-radius: 6px;
            margin: 1.5em 0;
        }
        
        .code-block {
            position: relative;
            margin: 2em 0;
        }
        
        .code-header {
            display: flex;
            align-items: center;
            background: #343a40;
            color: #f8f9fa;
            padding: 0.5em 1em;
            font-size: 0.85em;
            border-radius: 6px 6px 0 0;
            border-bottom: 1px solid #495057;
        }
        
        .code-header + pre[class*="language-"] {
            margin-top: 0;
            border-top-left-radius: 0;
            border-top-right-radius: 0;
        }
        
        .code-language {
            font-weight: 600;
            margin-right: auto;
        }
        
        /* Override Prism toolbar position */
        div.code-toolbar > .toolbar {
            top: 0.3em;
            right: 0.3em;
        }
        
        div.code-toolbar > .toolbar > .toolbar-item > button {
            color: #f8f9fa;
            background: rgba(75, 85, 99, 0.5);
            padding: 0.25em 0.75em;
            border-radius: 4px;
        }
        
        div.code-toolbar > .toolbar > .toolbar-item > button:hover,
        div.code-toolbar > .toolbar > .toolbar-item > button:focus {
            background: rgba(75, 85, 99, 0.8);
        }
        
        /* TL;DR and Table of Contents styles */
        .tldr-container {
            margin: 20px 0;
        }
        
        .tldr-box {
            background-color: #f8f9fa;
            border-left: 5px solid #f1780e;
            border-radius: 5px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        
        body.dark-mode .tldr-box {
            background-color: #2d2d2d;
            border-color: #f1780e;
        }
        
        .tldr-en, .tldr-zh {
            margin-top: 15px;
        }
        
        .tldr-zh {
            margin-top: 20px;
            font-family: 'Noto Sans SC', sans-serif;
        }
        
        .toc-container {
            background-color: #f8f9fa;
            border-radius: 5px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        
        body.dark-mode .toc-container {
            background-color: #2d2d2d;
        }
        
        #toc {
            padding-left: 20px;
        }
        
        #toc ul {
            list-style-type: none;
            padding-left: 15px;
        }
        
        #toc a {
            text-decoration: none;
            color: #333;
            display: inline-block;
            padding: 4px 0;
            transition: all 0.3s ease;
        }
        
        body.dark-mode #toc a {
            color: #f5f5f5;
        }
        
        #toc a:hover {
            color: #f1780e;
            transform: translateX(3px);
        }
        
        #toc a.active {
            color: #f1780e;
            font-weight: 600;
        }
        
        #toc .toc-h2 {
            font-weight: 600;
        }
        
        #toc .toc-h3 {
            padding-left: 15px;
            font-size: 0.95em;
        }
        
        /* Key points box */
        .key-points {
            background-color: #f8f9fa;
            border-radius: 5px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        
        body.dark-mode .key-points {
            background-color: #2d2d2d;
        }
        
        .key-points h4 {
            color: #f1780e;
            margin-top: 0;
        }
        
        .key-points ul {
            margin-bottom: 0;
        }
        
        .key-points li {
            margin-bottom: 8px;
        }
        
        /* Technical boxes */
        .technical-box {
            background-color: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 5px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .technical-box h4 {
            color: #f1780e;
            margin-top: 0;
        }
        
        /* Related Reading styles */
        .related-reading {
            margin: 40px 0;
            padding: 20px;
            border-top: 1px solid #e9ecef;
        }
        
        .related-articles {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .related-article {
            border: 1px solid #e9ecef;
            border-radius: 5px;
            overflow: hidden;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        body.dark-mode .related-article {
            border-color: #3d3d3d;
        }
        
        .related-article:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        
        .related-article img {
            width: 100%;
            height: 150px;
            object-fit: cover;
        }
        
        .related-article-content {
            padding: 15px;
        }
        
        .related-article h4 {
            margin-top: 0;
            font-size: 1.1em;
            margin-bottom: 10px;
        }
        
        .related-article p {
            font-size: 0.9em;
            color: #6c757d;
            margin-bottom: 0;
        }
        
        body.dark-mode .related-article p {
            color: #adb5bd;
        }
        
        /* ÂèåËØ≠ÊîØÊåÅÊ†∑Âºè */
        .en-sub-text {
            font-size: 0.9em;
            color: #6c757d;
            margin-top: 5px;
        }
        
        body.dark-mode .en-sub-text {
            color: #adb5bd;
        }
        
        .subscription-box {
            background-color: #f8f9fa;
            border-radius: 5px;
            padding: 25px;
            margin: 40px 0;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        
        body.dark-mode .subscription-box {
            background-color: #2d2d2d;
            border-color: #3d3d3d;
        }
        
        .subscription-form {
            display: flex;
            max-width: 500px;
            margin: 20px auto 0;
        }
        
        .subscription-form input {
            flex-grow: 1;
            padding: 10px 15px;
            border: 1px solid #ced4da;
            border-radius: 4px 0 0 4px;
            font-size: 1rem;
        }
        
        .subscription-form button {
            background-color: #f1780e;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 0 4px 4px 0;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        
        .subscription-form button:hover {
            background-color: #e26c00;
        }
    </style>
    
    <!-- JSON-LD structured data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "BlogPosting",
      "headline": "Feature Gates = Experiments: An Engineering Guide to A/B Value, System, and Hard Tech",
      "description": "A practical engineering guide to A/B testing at scale: value and culture, platform evolution, power & MDE, CUPED/CURE, Bayesian vs. frequentist, sequential testing, SOPs, pitfalls, and resources.",
      "image": "https://yangmingli.com/img/Logo.png",
      "datePublished": "2024-12-19T00:00:00+00:00",
      "dateModified": "2024-12-19T00:00:00+00:00",
      "author": {
        "@type": "Person",
        "name": "Yangming Li",
        "url": "https://yangmingli.com/",
        "jobTitle": "AI Engineer & Product Manager",
        "knowsAbout": ["Machine Learning", "Artificial Intelligence", "Data Science", "Product Management", "MLOps", "Deep Learning", "A/B Testing", "Experimental Design"],
        "alumniOf": ["University of Victoria", "University of Waterloo"],
        "sameAs": [
          "https://www.linkedin.com/in/yangmingli/",
          "https://github.com/yml-blog"
        ],
        "knowsLanguage": ["en", "zh"]
      },
      "publisher": {
        "@type": "Organization",
        "name": "Yangming Li Blog",
        "logo": {
          "@type": "ImageObject",
          "url": "https://yangmingli.com/img/Logo.png"
        }
      },
      "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://yangmingli.com/engineering/ab-test-engineering-guide.html"
      },
      "keywords": "A/B testing, experimentation, engineering, feature gate, CUPED, sequential testing, MDE, power, experiment platform, variance reduction",
      "articleSection": "Engineering",
      "wordCount": "8000",
      "inLanguage": ["en-US"],
      "about": {
        "@type": "Thing",
        "name": "A/B Testing Engineering",
        "description": "Technical content about A/B testing engineering and experimental design"
      },
      "isAccessibleForFree": "True",
      "timeRequired": "PT15M",
      "abstract": "Engineering A/B testing at scale with CUPED, sequential testing, platform design, SOPs, and governance."
    }
    </script>
    
    <!-- Breadcrumb structured data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement": [
        {
          "@type": "ListItem",
          "position": 1,
          "name": "Home",
          "item": "https://yangmingli.com/"
        },
        {
          "@type": "ListItem",
          "position": 2,
          "name": "Engineering",
          "item": "https://yangmingli.com/engineering/"
        },
        {
          "@type": "ListItem",
          "position": 3,
          "name": "Feature Gates = Experiments: An Engineering Guide to A/B",
          "item": "https://yangmingli.com/engineering/ab-test-engineering-guide.html"
        }
      ]
    }
    </script>
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="content text-center">
                <h1>Feature Gates = Experiments: A Practical Engineering Guide to A/B Testing</h1>
                <p class="lead">By Yangming Li</p>
            </div>
        </header>
        
        <!-- Dark mode toggle -->
        <div class="theme-switch-wrapper">
            <span>Light</span>
            <label class="theme-switch" for="checkbox">
                <input type="checkbox" id="checkbox" />
                <div class="slider round"></div>
            </label>
            <span>Dark</span>
        </div>
        
        <div class="article-metadata">
            <p><i class="fa fa-calendar"></i> Published: 2024-12-19</p>
            <p><i class="fa fa-tags"></i> Tags: A/B testing, Experimentation, CUPED, Sequential Testing, Feature Gates</p>
            <p><i class="fa fa-folder"></i> Category: Engineering</p>
        </div>
        
        <!-- Social sharing buttons -->
        <div class="blog-share-buttons">
            <a href="#" class="twitter" onclick="window.open('https://twitter.com/intent/tweet?url=' + encodeURIComponent(window.location.href) + '&text=' + encodeURIComponent(document.title), 'twitter-share', 'width=550,height=435'); return false;">
                <i class="fa fa-twitter"></i> Share on Twitter
            </a>
            <a href="#" class="linkedin" onclick="window.open('https://www.linkedin.com/sharing/share-offsite/?url=' + encodeURIComponent(window.location.href), 'linkedin-share', 'width=550,height=435'); return false;">
                <i class="fa fa-linkedin"></i> Share on LinkedIn
            </a>
            <a href="#" class="email" onclick="window.location.href = 'mailto:?subject=' + encodeURIComponent(document.title) + '&body=' + encodeURIComponent('Check out this article: ' + window.location.href); return false;">
                <i class="fa fa-envelope"></i> Share via Email
            </a>
        </div>
        
        <main>
            <!-- TL;DR section with reading time -->
            <div class="tldr-container">
                <div class="tldr-box">
                    <h4><i class="fa fa-clock-o"></i> Reading time: 15 minutes</h4>
                    <div class="tldr-en">
                        <h5>TL;DR</h5>
                        <p>The value of experimentation comes from surprises ‚Äî not proving intuition. Make feature gates and experiments the same object so that shipping equals experimenting (default-on). This guide covers culture and value, platform evolution from 5/year to 50,000/year, power & MDE, CUPED/CURE, Bayesian vs frequentist, sequential testing, SOPs, pitfalls, and resources.</p>
                    </div>
                </div>
            </div>
            
            <!-- Table of Contents -->
            <div class="toc-container">
                <h4>Contents</h4>
                <div id="toc"></div>
            </div>
            
            <!-- Key Points box -->
            <div class="key-points">
                <h4>Highlights</h4>
                <ul>
                    <li><strong>Core value</strong>: experiments surface surprises; prune bad ideas and amplify unexpected wins</li>
                    <li><strong>Default-on experimentation</strong>: unify feature gates and experiments; shipping equals experimenting</li>
                    <li><strong>Hard tech</strong>: CUPED/CURE, sequential testing, Bayesian vs frequentist without dogma</li>
                    <li><strong>Execution</strong>: checklists, SOPs, and a two-week pilot plan</li>
                </ul>
            </div>
            
            <!-- Main content -->
            <article class="article-content">
                <h2 id="why-experiments">1. Why Experiments: Value, Culture, and Intellectual Honesty</h2>
                
                <h3>Value comes from surprises</h3>
                <p>Large-scale online experiments show that many seemingly correct ideas fail in reality, while tiny changes can yield massive upside. Both positive surprises (low expectation ‚Üí high return) and negative surprises (confident but harmful) compound into experimentation‚Äôs core value.</p>
                
                <div class="technical-box">
                    <h4>üí° Key insight</h4>
                    <p>Experimentation is not about proving intuition; it systematically discovers surprises. Controlled experiments provide causal evidence and prevent intuition-driven regressions in complex systems.</p>
                </div>
                
                <h3>Engineering culture</h3>
                <p>When feature gates and experiments are unified and default-on, engineers can ship first and falsify later, replacing consensus meetings with data. Gradual rollouts (1% ‚Üí 10% ‚Üí 100%) become a default safety net. Facebook‚Äôs PlanOut is a classic example of parameterized experimentation embedded in services.</p>
                
                <h3>Intellectual honesty</h3>
                <p>Human intuition fails frequently in complex systems. Controlled experiments provide causal proofs that reduce the long-term costs and externalities of shipping the wrong changes.</p>
                
                <h2 id="system-building">2. Platform Evolution: From 5/year to 50,000/year</h2>
                
                <h3>Three-stage evolution</h3>
                <ol>
                    <li><strong>Manual analytics (Notebook/SQL)</strong>: quick to start, error-prone, non-reusable.</li>
                    <li><strong>Compute automation (pipelines)</strong>: automate extraction and stats, still heavy setup per experiment.</li>
                    <li><strong>Gate‚ÄìExperiment unified infra</strong>: treating gates and experiments as the same object; default-on with built-in randomization and stats engine; metrics catalog for centralized definitions and lineage.</li>
                </ol>
                
                <h3>Engineering essentials</h3>
                <ul>
                    <li><strong>Conditional distribution</strong>: configure by region/platform/user/gradual rollout; unify randomization (user/session/request), stable hashing with salt rotation.</li>
                    <li><strong>Parallelism at scale</strong>: orthogonal experiments are normal; interactions rarely block scaling; pre-flag extreme conflicts.</li>
                    <li><strong>Metric trust</strong>: productize metric definitions (dimensions, filters, dedup, windows), full lineage; trustworthiness precedes scale.</li>
                </ul>
                
                <h2 id="statistical-fundamentals">3. Statistical Keys: Power, MDE, Parallel Experiments</h2>
                
                <p>Sample size is roughly constrained by the business. Optimize to detect smaller effects (lower MDE) or shorten duration, essentially by reducing variance.</p>
                
                <div class="technical-box">
                    <h4>üìä Statistical power</h4>
                    <p>Power = P(reject H‚ÇÄ | H‚ÇÅ true) = 1 ‚àí Œ≤. Higher power increases the probability of detecting true effects.</p>
                </div>
                
                <p>Parallel experiments with orthogonal bucketing are feasible and necessary. The real risks are peeking and metric drift, not interaction effects.</p>
                
                <h2 id="variance-reduction">4. Variance Reduction: CUPED/CURE in Practice</h2>
                
                <h3>CUPED (Controlled-experiment Using Pre-Experiment Data)</h3>
                <p>Use pre-experiment baselines (or covariates) to regress out variance from outcome Y and compare treatment effects on residuals. This shrinks variance/intervals and reduces sample/time.</p>
                
                <div class="technical-box">
                    <h4>üî¨ CUPED formula</h4>
                    <p>Given outcome Y and baseline X, define Y' = Y ‚àí Œ∏(X ‚àí XÃÑ), with Œ∏ from regression; analyze treatment differences on Y'.</p>
                </div>
                
                <h3>Multivariate extensions (CURE / RA)</h3>
                <p>Add stable, interpretable covariates (long-term activity, device attributes) for further denoising. Handle new users separately when baseline is absent.</p>
                
                <h3>Practice notes</h3>
                <p>Well-engineered CUPED usually captures most variance reduction; chasing exotic methods has poor ROI.</p>
                
                <h2 id="bayesian-vs-frequentist">5. Bayesian vs Frequentist: What Matters (and What Doesn‚Äôt)</h2>
                
                <h3>Same data, different lenses</h3>
                <p>With weak or non-informative priors, both approaches converge in large samples. Don‚Äôt burn execution energy on ideology.</p>
                
                <h3>Be careful with strong priors</h3>
                <p>Strong point priors invite bias. Prefer interval robustness to reduce over-launch risk.</p>
                
                <h3>Industry lens</h3>
                <p>Balance interpretability, communication cost, and platform support. Pick a stable playbook and stick to it.</p>
                
                <h2 id="sequential-testing">6. Sequential Testing: Anti-Peeking and FDR Control</h2>
                
                <h3>The core issue</h3>
                <p>Frequent looks and early stopping inflate false positives. Always-valid p-values/CI and mSPRT provide principled sequential inference already deployed at scale.</p>
                
                <h3>Engineering strategies</h3>
                <ul>
                    <li>Use conservative sequential boundaries (wider early CI that narrows over time).</li>
                    <li>Assume unlimited peeking; apply beta/alpha-spending schedules.</li>
                    <li>Stop early for significant harm; for wins, decide at pre-specified duration.</li>
                </ul>
                
                <h3>Multiple testing and FDR</h3>
                <p>For large parallel portfolios, control false discovery rate (e.g., Benjamini‚ÄìHochberg) as organizational hygiene.</p>
                
                <h2 id="implementation-checklist">7. Implementation Checklist & SOP (Copy-Paste Ready)</h2>
                
                <h3>Architecture & platform</h3>
                <ul>
                    <li>Unified SDK for Feature Gate + Experiment (server-first; mirrored on client).</li>
                    <li>Configurable bucketing by region/platform/account/time; staged rollout 1% ‚Üí 10% ‚Üí 100%.</li>
                    <li>Unified randomization units: user/session/request; stable hashing; salt rotation; A/A monitoring.</li>
                    <li>Metrics catalog with lineage and versioning to avoid inconsistent definitions.</li>
                    <li>Experiment templates: hypothesis, primary/guardrail metrics, stop rules, sample & power, risk & rollback.</li>
                </ul>
                
                <h3>Statistics & governance</h3>
                <ul>
                    <li>Pre-compute sample, power, and MDE (Œ±=0.05; power=0.8/0.9).</li>
                    <li>Enable CUPED/multivariate RA by default; split cohorts for new vs existing users.</li>
                    <li>Use sequential testing (conservative boundaries; early-stop for harm; on-time decisions for wins).</li>
                    <li>Allow orthogonal parallel experiments by default; pre-mark extreme conflicts.</li>
                    <li>Quarterly FDR/TPR dashboard; tighten thresholds if FDR spikes.</li>
                    <li>Result narrative: absolute/relative effect, intervals, coverage, concurrency, denoising method, data versions.</li>
                </ul>
                
                <h3>Two-week pilot plan</h3>
                <div class="technical-box">
                    <h4>üìÖ Schedule</h4>
                    <ul>
                        <li><strong>D1‚Äì3</strong>: Define 3‚Äì5 North Star/guardrail metrics ‚Üí catalog + lineage.</li>
                        <li><strong>D4‚Äì6</strong>: Integrate Gate+Experiment SDK for one pilot; choose unit and hashing.</li>
                        <li><strong>D7‚Äì9</strong>: Enable CUPED + conservative sequential; run 3‚Äì5 lightweight changes in parallel.</li>
                        <li><strong>D10‚Äì14</strong>: First review (effects, FDR, data quality, alerts); harden templates and launch criteria.</li>
                    </ul>
                </div>
                
                <h2 id="common-mistakes">8. Common Pitfalls and Anti-Patterns</h2>
                
                <ul>
                    <li><strong>Only testing ‚Äúsafe‚Äù ideas</strong> ‚Üí low information gain, no compounding.</li>
                    <li><strong>Confusing complexity with value</strong>: fancy models hurt readability and extensibility; max out CUPED first.</li>
                    <li><strong>Peeking without sequential correction</strong> ‚Üí FPR/FDR spikes and wrong launches accumulate.</li>
                    <li><strong>Untrusted metrics</strong>: fragmented definitions and no lineage ‚Üí teams ignore results.</li>
                    <li><strong>Serializing due to interaction fear</strong> ‚Üí pace collapses; opportunity costs explode.</li>
                </ul>
                
                <h2 id="resources">9. Further Resources (Papers | Docs | Videos)</h2>
                
                <h3>Papers / Surveys</h3>
                <ul>
                    <li><strong>Trustworthy Online Controlled Experiments</strong> (Kohavi et al.): industry-standard book combining engineering and culture with billion-dollar micro-change cases.</li>
                    <li><strong>CUPED original paper</strong> (Microsoft, WSDM‚Äô13): regression-adjustment using pre-experiment data for sensitivity gains.</li>
                    <li><strong>Sensitivity enhancements</strong> (KDD‚Äô16): compares stratification, post-stratification, CUPED, etc.</li>
                    <li><strong>Always-valid inference</strong> (Johari et al.): sequential validity for ‚Äúlook anytime, stop anytime.‚Äù</li>
                    <li><strong>FDR control: Benjamini‚ÄìHochberg</strong>: practical control under many parallel tests.</li>
                </ul>
                
                <h3>Engineering Docs / Platforms</h3>
                <ul>
                    <li><strong>Facebook PlanOut</strong>: parameterized experiments as a language/library decoupled from product code (paper & GitHub).</li>
                    <li><strong>Statsig docs/blog</strong>: sequential testing, mSPRT, CUPED practice and productization.</li>
                </ul>
                
                <h3>Videos / YouTube</h3>
                <ul>
                    <li><strong>Ronny Kohavi talks</strong> (Airbnb, CXL, AMA): myths, traps, and scale lessons.</li>
                    <li><strong>Statsig platform strategy</strong> (demos/overviews/B2B): scaling from 5 to 5,000, holdouts/bandits, result interpretation.</li>
                </ul>
                
                <h2 id="conclusion">Conclusion & Quotables</h2>
                
                <div class="technical-box">
                    <h4>üíé Quotables</h4>
                    <blockquote>
                        <p><strong>"The value of experimentation comes from surprises."</strong></p>
                        <p><strong>"Make feature gates and experiments the same object; default-on experimentation."</strong></p>
                    </blockquote>
                </div>
                
                <p>With systematic engineering, A/B testing evolves from occasional validation to a continuous value discovery engine. The key is integrating experimentation into every product step so that data-driven decision-making becomes cultural.</p>
                
                <p>Remember: experimentation is a starting line, not a finish line. Each run explores the unknown; each surprise reframes product value.</p>
            </article>
            
            
        </main>
        
        <!-- Email Subscription -->
        <div class="subscription-box">
            <h3>Subscribe for Updates</h3>
            <p>Get the latest articles, tutorials, and insights on AI, machine learning, and data science delivered to your inbox.</p>
            <p class="en-sub-text">We send occasional, high-signal updates only.</p>
            <form class="subscription-form" action="https://formspree.io/f/YOUR_FORM_ID" method="POST">
                <input type="email" name="email" placeholder="Your email address" required>
                <button type="submit">Subscribe</button>
            </form>
        </div>
        
        <footer class="footer text-center">
            <p>&copy; 2024 Yangming Li. All rights reserved. | <a href="../">Home</a></p>
        </footer>
    </div>

    <script src="../js/jquery-2.1.4.min.js"></script>
    <script src="../js/bootstrap.min.js"></script>
    <script src="../js/scripts.js"></script>
    <script src="../js/blogPanel.js"></script>
    <script src="../js/toc.js"></script>
    
    <!-- Prism.js for code highlighting -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/toolbar/prism-toolbar.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/copy-to-clipboard/prism-copy-to-clipboard.min.js"></script>
    <script src="../js/copyCodeButton.js"></script>
    
    <script>
        // Add code language headers to code blocks
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelectorAll('pre[class*="language-"]').forEach(function(pre) {
                // Get language from class
                const classMatch = pre.className.match(/language-(\w+)/);
                if (classMatch && classMatch[1]) {
                    const language = classMatch[1];
                    
                    // Create header element
                    const header = document.createElement('div');
                    header.className = 'code-header';
                    
                    // Add language name
                    const langSpan = document.createElement('span');
                    langSpan.className = 'code-language';
                    langSpan.textContent = language.charAt(0).toUpperCase() + language.slice(1);
                    header.appendChild(langSpan);
                    
                    // Wrap pre in a div
                    const wrapper = document.createElement('div');
                    wrapper.className = 'code-block';
                    pre.parentNode.insertBefore(wrapper, pre);
                    wrapper.appendChild(header);
                    wrapper.appendChild(pre);
                }
            });
        });
        
        // Check for saved theme preference
        const currentTheme = localStorage.getItem('theme') ? localStorage.getItem('theme') : null;
        
        // Apply saved theme on page load
        if (currentTheme) {
            document.body.classList.add(currentTheme);
            
            // Update toggle position if dark mode
            if (currentTheme === 'dark-mode') {
                document.getElementById('checkbox').checked = true;
            }
        }
        
        // Toggle theme when switch is clicked
        document.getElementById('checkbox').addEventListener('change', function(e) {
            if (e.target.checked) {
                document.body.classList.add('dark-mode');
                localStorage.setItem('theme', 'dark-mode');
            } else {
                document.body.classList.remove('dark-mode');
                localStorage.setItem('theme', '');
            }
        });
    </script>
</body>
</html>
